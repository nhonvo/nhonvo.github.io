---
import {
  BASE,
  MANUAL_DARK_MODE,
  SEARCH_ENABLED,
  SITE_FAVICON,
  SITE_NAME,
  SITE_TITLE,
  SHOW_FAVICON_IN_HEADER,
} from "../config.ts";
import ThemeToggle from "./ThemeToggle.astro";
import HeaderLink from "./HeaderLink.astro";
import SocialIcons from "./SocialIcons.astro";

import CommandPalette from "./search/CommandPalette.svelte";
import Search from "./search/Search.svelte";

const { active } = Astro.props;
---



<header>
  <nav
    class="flex items-center justify-between p-6 lg:px-8"
    aria-label="Global"
  >
    <div class="flex lg:flex-1 animate-fade-in" style="animation-delay: 100ms">
      <a href={BASE + "/"} class="group p-1.5 transition-transform duration-300 hover:scale-105 active:scale-95">
        <span class="sr-only">go to home</span>

        <div class="text-3xl flex items-center gap-x-3">
          {SHOW_FAVICON_IN_HEADER ? <div class="transition-transform duration-500 group-hover:rotate-12">{SITE_FAVICON}</div> : null}
          <span
            class="hidden md:block font-extrabold tracking-tighter text-base-950 dark:text-base-50 transition-colors group-hover:text-accent-600 dark:group-hover:text-accent-400"
            >{SITE_NAME || SITE_TITLE}</span
          >
        </div>
      </a>
    </div>
    <div class="flex items-center gap-x-2 sm:gap-x-8 animate-fade-in" style="animation-delay: 200ms">
      <HeaderLink
        href={BASE + "/posts"}
        active={active === "blog"}
        class="text-sm font-bold leading-6 transition-all duration-300 hover:text-accent-600 dark:hover:text-accent-400 hover:-translate-y-0.5"
      >
        Archive
      </HeaderLink>
      <HeaderLink
        href={BASE + "/"}
        active={active === "home"}
        class="text-sm font-bold leading-6 transition-all duration-300 hover:text-accent-600 dark:hover:text-accent-400 hover:-translate-y-0.5"
      >
        Latest
      </HeaderLink>
      <HeaderLink
        href={BASE + "/about"}
        active={active === "about"}
        class="text-sm font-bold leading-6 transition-all duration-300 hover:text-accent-600 dark:hover:text-accent-400 hover:-translate-y-0.5"
      >
        About
      </HeaderLink>

      <div class="flex items-center gap-x-4 border-l border-base-200 dark:border-base-800 ml-4 pl-4">
        <SocialIcons class="hidden sm:flex gap-x-4 mr-2" iconClass="h-4 w-4" />
        {MANUAL_DARK_MODE ? <div class="hover:scale-110 transition-transform"><ThemeToggle /></div> : null}
        {SEARCH_ENABLED ? <div class="hover:scale-110 transition-transform"><Search client:visible /></div> : null}
      </div>
    </div>


  </nav>
</header>

<CommandPalette client:load />

